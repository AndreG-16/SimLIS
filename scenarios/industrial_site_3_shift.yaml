site_type: industrial_site             # Standort des Ladepunkts

time_resolution_min: 15               # Zeitschritt, in der die Simulation abgebildet wird
simulation_horizon_days: 7            # gewünschter Analysehorizont in Tagen

start_datetime: "2025-01-01 00:00"    # Zeitpunkt, ab dem der Lastgang anfangen soll
holidays:
  country: "DE"
  subdivision: "BY"                   # Bundesland als Code: BW, BY, BE, BB, HB, HH, HE, MV, NI, NW, RP, SL, SN, ST, SH, TH
  dates: []                           # zusätzliche bekannte betriebsfreie Tage manuell eingeben, getrennt durch neue Zeile (- "2026-01-01")


site:
  number_chargers: 20                                         # Anzahl der Ladepunkte am Standort
  rated_power_kw: 12                                         # Verfügbare Leistung pro Ladepunkt
  grid_limit_p_avb_kw: 1000                                   # Maximale Anschlussleistung durch Netzbetreiber vorgegeben
  charger_efficiency: 0.95                                    # Verhältnis Fahrzeugaufnahme zu abgegebener LP-Leistung
  allow_cross_day_charging: true                              # Ermöglicht Ladungen über Mitternacht hinaus

  # =============================================================================
  # Lademanagementstrategie des Standorts
  # =============================================================================
  # Daten für generation / market: https://www.smard.de/home/downloadcenter/download-marktdaten/

  charging_strategy: "generation"                              # Lademanagementstrategie: "immediate" (default), "market", "generation"

  # CSV-Datei: PV-Erzeugung (generation)
  # Beim Einlesen einer anlagenspezifischen Datei "tilt_angle_solar_module" und "location_pv_site" leer lassen und "generation_strategy_value_col" anpassen
  generation_strategy_csv: "../data/strategies/generation/PV_Erzeugung_Standardprofile_DE.csv"      # Pfad bei vorhandenen Daten zur Stromgeneration: "../data/strategies//generation/PV_Erzeugung_Standardprofile_DE.csv"
  generation_strategy_value_col: 7                                                                  # Spalte, die entsprechende Werte ("MWh", "kWh", o.ä.) enthalten, woran sich die Lademanagementstrategie richtet (1-basierter Code: 1 = erste Spalte)
  generation_strategy_unit: "kW"                                                                    # Einheit, die für den Wert im Lademanagement verwendet wird ("MWh", "kWh", "kW", "€/MWh")
  pv_system_size_kwp: 2500                                                                          # Größe der untersuchten Anlage in kWp
  tilt_angle_solar_module: 10                                                                       # Neigungswinkel des Solarmoduls in Grad ("10", "15", "20", "25", "30")
  location_pv_site: Augsburg                                                                        # Standort der Anlage bzw. vergleichbar laut Globalstrahlung in DE ("Augsburg", "Cottbus", "Hamburg", "Hannover", "Ingolstadt", "Leipzig", "Magdeburg", "Nürnberg", "Regensburg", "Schwerin")

  # CSV-Datei: Marktpreise (market)
  market_strategy_csv: "../data/strategies/market/Marktdaten_Grosshandelspreise_DE_2025.csv"        # Pfad bei vorhandenen Daten zu Strompreisen: "../data/strategies//market/Marktdaten_Grosshandelspreise_DE_2025.csv"
  market_strategy_value_col: 3                                                                      # Spalte, die entsprechende Werte ("€/MWh", "€/kWh", o.ä.) enthalten, woran sich die Lademanagementstrategie richtet (1-basierter Code: 1 = erste Spalte)
  market_strategy_unit: "€/MWh"                                                                     # Einheit, die für den Wert im Lademanagement verwendet wird (€/kWh", "€/MWh")

  # =============================================================================
  # Grundlast des Standorts - Gebäudeprofil
  # =============================================================================
  # Die Grundlast beschreibt den zeitlich aufgelösten Stromverbrauch des Gebäudes im 15-Minuten-Raster
  #
  # Wird eine CSV angegeben, wird deren Profil als zeitlicher Verlauf ("Shape") verwendet und auf den
  # angegebenen Standort skaliert:
  # - base_load_unit = "kWh":
  #     CSV-Werte sind Energie pro Zeitschritt (z. B. HTW-Profile, auf 1000 kWh/Jahr normiert).
  #     Die Werte werden auf base_load_annual skaliert und anschließend in kW umgerechnet.
  # - base_load_unit = "kW":
  #     CSV-Werte sind mittlere Leistung je Zeitschritt.
  #     Das Profil wird so skaliert, dass seine mittlere Leistung base_load_annual entspricht.
  #
  # Ist keine CSV angegeben, wird eine konstante Grundlast verwendet.

  # Option A: konstante Grundlast (kW)
  base_load_kw: 50

  # Option B: Grundlast aus CSV-Datei (hat Vorrang gegenüber Option A)
  base_load_csv: "../data/building_loads/office_tub_2018.csv"            # Pfad zu den Gebäudeprofilen: "../data/building_loads/office_tub_2018.csv"
  base_load_value_col: 2                                                # Spalte mit dem Profilwert (1-basiert, z. B. Mean_Value)
  base_load_unit: "kWh"                                                 # "kWh" oder "kW"
  base_load_annual: 500000                                              # jährlicher standortspezifischer Verbrauch (kWh oder kW, passend zur Einheit)


# =============================================================================
# Fuhrparkbeschreibung – Parameter / Datenquellen
# =============================================================================

vehicles:
  soc_target: 0.95                                                # Gewünschter Ladezustand am Ende des Ladeprozesses
  vehicle_curve_csv: "../data/Ladekurven_Master.csv"              # Batteriekapazität und Ladekurve nach SOC
  fleet_mix:                                                      # Gewichtung der Fahrzeugtypen - PKW & Transporter
    PKW: 0.95
    Transporter: 0.05

# =============================================================================
# Ankunftszeiten, Standzeit und SoC bei Ankunft
# =============================================================================

# Ankunftszeiten an den Ladepunkten
arrival_time_distribution:
  type: mixture
  time_unit: minutes

  # Skalierung der Ladevorgänge je nach Tagtyp
  weekday_weight:
    working_day: [0.95, 1.25]               # hoher Betrieb an Arbeitstagen (3-Schicht-Betrieb)
    saturday: [0.10, 0.35]                  # reduzierter Betrieb am Samstag (Teil-/Sonderbetrieb)
    sunday_holiday: [0.02, 0.10]            # i. d. R. Not-/Wartungsbetrieb (selten)

  components_per_weekday:
    # Industrial (3-Schicht): Peaks zu Schichtbeginn (früh, nachmittags, nachts)
    # Die Bennenung 'name' hat keine Funktion für den Code und kann beliebig angepasst werden
    working_day:
      - name: peak_1                        # Frühschicht / erster Schichtbeginn
        distribution: normal
        mu: [5.5, 7.0]                      # Peak in Stunden seit Mitternacht
        sigma: [0.4, 0.9]                   # Streuung in Stunden
        weight: 0.35                        # Gewichtung innerhalb working_day

      - name: peak_2                        # Spätschicht / zweiter Schichtbeginn
        distribution: normal
        mu: [13.0, 15.0]
        sigma: [0.4, 1.0]
        weight: 0.35

      - name: peak_3                        # Nachtschicht / dritter Schichtbeginn
        distribution: normal
        mu: [21.5, 23.5]
        sigma: [0.5, 1.2]
        weight: 0.30

    saturday:
      - name: peak_4                        # Vormittag (verkürzte/Teilproduktion)
        distribution: normal
        mu: [6.5, 9.0]
        sigma: [0.8, 1.8]
        weight: 0.60

      - name: peak_5                        # Nachmittag (Restbetrieb / Übergaben)
        distribution: normal
        mu: [13.0, 16.0]
        sigma: [0.9, 2.2]
        weight: 0.40

    sunday_holiday:
      - name: peak_6                        # Notbetrieb / Wartung / Security
        distribution: normal
        mu: [10.0, 13.0]
        sigma: [1.5, 2.5]
        weight: 1.0


# Parkdauer in Minuten ab Ankunft; Verteilung ist eine Mischung aus Kurz- und Langzeitparkern
# Industrial (3-Schicht): überwiegend Schichtparker (≈ 7–10h), plus kürzere Aufenthalte (Übergaben/Meetings)
parking_duration_distribution:
  type: mixture
  time_unit: minutes
  max_duration_minutes: 720                 # Obergrenze maximale Ladedauer (z. B. 12 Stunden)
  min_duration_minutes: 20                  # Untergrenze minimale Ladedauer

  components:
  # Die Bennenung 'name' hat keine Funktion für den Code und kann beliebig angepasst werden
    - name: shift_stay                      # typische Schichtparkdauer
      distribution: normal
      weight: 0.70
      mu: [420, 600]                        # 7–10 Stunden
      sigma: [60, 120]                      # Streuung 1–2 Stunden

    - name: medium_stay                     # Teilzeit / längere Meetings / Übergaben
      distribution: normal
      weight: 0.20
      mu: [180, 360]                        # 3–6 Stunden
      sigma: [45, 90]

    - name: short_stay                      # Besucher / kurze Termine / Materialabholung
      distribution: normal
      weight: 0.10
      mu: [30, 120]                         # 0.5–2 Stunden
      sigma: [10, 30]


# Batteriezustand bei Ankunft; Verteilung ist eine Mischung aus gezieltem Laden und opportunistischem Laden
# Industrial (3-Schicht): pendlergetrieben (mittlerer SoC), opportunistisches Laden vorhanden
soc_at_arrival_distribution:
  type: mixture
  value_unit: fraction                      # 0.0 bis 1.0
  max_soc: 0.75                             # maximales SoC bei Ankunft

  components:
  # Die Bennenung 'name' hat keine Funktion für den Code und kann beliebig angepasst werden
    - name: low_battery_charging               # Pendler mit mittlerem SoC, die regelmäßig nachladen
      distribution: beta
      weight: 0.75
      alpha: [2.0, 3.4]                     # Peak grob im Bereich 0.20–0.45
      beta: [3.0, 5.2]

    - name: opportunistic_charging          # „wenn ich eh da bin“-Laden
      distribution: normal
      weight: 0.25
      mu: [0.50, 0.70]
      sigma: [0.07, 0.12]
