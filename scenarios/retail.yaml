site_type: retail                                                     # Standort des Ladepunkts
time_resolution_min: 15                                               # Zeitschritt, in der die Simulation berechnet wird
simulation_horizon_days: 5                                            # gewünschter Analysehorizont in Tagen

start_datetime: "2025-03-29 00:00"                                    # Zeitpunkt, ab dem die Simulation beginnen soll

charging_strategy: "immediate"                                       # "immediate" | "market" | "pv"
localload_pv_market_csv: "../data/localload_pv_market_retail.csv"     # CSV-Datei mit den Daten zur Grundlast, PV-Erzeugung und Marktpreisen
  
timezone: "Europe/Berlin"                                             # Zeitzone, in der sich die Anlage befindet
holidays:
  country: "DE"
  subdivision: "HH"                                                   # Bundesland als Code: BW, BY, BE, BB, HB, HH, HE, MV, NI, NW, RP, SL, SN, ST, SH, TH
  dates: []                                                           # zusätzliche bekannte betriebsfreie Tage manuell eingeben, getrennt durch neue Zeile (- "2026-01-01")

site:
  number_chargers: 2                                          # Anzahl der Ladepunkte am Standort
  rated_power_kw: 50                                          # Verfügbare Leistung pro Ladepunkt
  grid_limit_p_avb_kw: 200                                    # Maximale Anschlussleistung durch Netzbetreiber vorgegeben
  expected_sessions_per_charger_per_day: [2.0, 6.0]           # erwartete Ladevorgänge pro LP und Tag
  charger_efficiency: 0.95                                    # Verhältnis Fahrzeugaufnahme zu abgegebener LP-Leistung
  allow_cross_day_charging: false                             # Ermöglicht keine Ladungen über Mitternacht hinaus

  # =============================================================================
  # Angaben zur lokalen PV-Anlage
  # =============================================================================
  pv_system_size_kwp: 100                                      # Größe der untersuchten Anlage in kWp
  
  # =============================================================================
  # Grundlast des Standorts - Gebäudeprofil
  # =============================================================================
  base_load_annual_kwh: 500000                                 # jährlicher standortspezifischer Verbrauch

# =============================================================================
# Fuhrparkbeschreibung – Ladekurven + Kapazitäten kommen aus CSV
# =============================================================================

vehicles:
  soc_target: 0.95                                             # Gewünschter Ladezustand am Ende des Ladeprozesses
  vehicle_curve_csv: "../data/Ladekurven_Master.csv"           # Batteriekapazität und Ladekurve nach SOC
  fleet_mix:                                                   # Gewichtung der Fahrzeugtypen - PKW & Transporter
    PKW: 0.5
    Transporter: 0.5
  vehicle_type: ["Mercedes E-Sprinter"]                        # Fahrzeuge können bei bekannten Fuhrpark spezifisch als In-Liste eingegeben werden (z.B. ["Fiat 500e Hatchback", "Audi e-tron GT", "Mercedes E-Sprinter"])

# =============================================================================
# Ankunftszeiten, Standzeit und SoC bei Ankunft
# =============================================================================

# Ankunftszeiten an den Ladepunkten
arrival_time_distribution:
  type: mixture
  time_unit: minutes

  # Skalierung der Ladevorgänge je nach Tagtyp
  weekday_weight:
    working_day: [0.6, 1.0]                 # mittlerer bis hoher Betrieb an Werktagen
    saturday: [1.0, 1.5]                    # hoher Betrieb am Samstag (Haupteinkaufstag)
    sunday_holiday: [0.0, 0.1]              # kein bzw. vernachlässigbarer Betrieb an Sonn- und Feiertagen

  components_per_weekday:
    # Retail: Hauptpeaks mittags und am späten Nachmittag/Abend
    # Die Bennenung 'name' hat keine Funktion für den Code und kann beliebig angepasst werden
    working_day:
      - name: peak_1                        # Einkäufe zur Mittagszeit
        distribution: normal
        mu: [9.0, 13.5]                    # Peak in Stunden seit Mitternacht
        sigma: [0.5, 1.0]                   # Streuung in Stunden
        weight: 0.4                         # Gewichtung innerhalb working_day

      - name: peak_2                        # Einkäufe nach der Arbeit
        distribution: normal
        mu: [17.0, 19.5]
        sigma: [0.5, 2.0]
        weight: 0.6

    # Retail: Samstag mit ausgedehntem Einkauf über den Tag verteilt
    saturday:
      - name: peak_3                        # Einkäufe am späten Vormittag
        distribution: normal
        mu: [10.0, 12.0]
        sigma: [0.8, 1.3]
        weight: 0.5

      - name: peak_4                        # Einkäufe am Nachmittag
        distribution: normal
        mu: [13.0, 16.0]
        sigma: [0.8, 1.5]
        weight: 0.5

    # Retail: Sonntag/Feiertag in DE typischerweise geschlossen
    sunday_holiday:
      - name: peak_5                        # seltene verkaufsoffene Sonntage / Sonderöffnungen
        distribution: normal
        mu: [11.0, 15.0]
        sigma: [1.0, 2.0]
        weight: 1.0


# Parkdauer in Minuten ab Ankunft; Verteilung ist eine Mischung aus Kurz- und Langzeitparkern
# Retail: viele Kurz- und Mittelaufenthalte, wenige sehr lange Aufenthalte
parking_duration_distribution:
  type: mixture
  time_unit: minutes
  max_duration_minutes: 240                 # Obergrenze maximale Ladedauer (z. B. 4 Stunden)
  min_duration_minutes: 20                  # Untergrenze minimale Ladedauer

  components:
  # Die Bennenung 'name' hat keine Funktion für den Code und kann beliebig angepasst werden
    - name: short_stay                      # kurzer Einkauf / Abholung / Drogerie
      distribution: normal
      weight: 0.5
      mu: [20, 30]                          # typische Parkdauer 20–30 Minuten
      sigma: [5, 20]

    - name: regular_stay                    # typischer Einkaufsaufenthalt
      distribution: normal
      weight: 0.4
      mu: [30, 50]                         # typische Parkdauer 0.5–1 Stunde
      sigma: [10, 20]

    - name: long_stay                       # längere Aufenthalte (z. B. Essen, Kino, großer Einkauf)
      distribution: normal
      weight: 0.1
      mu: [50, 120]                        # typische Parkdauer 2–3+ Stunden
      sigma: [10, 20]


# Batteriezustand bei Ankunft; Verteilung ist eine Mischung aus opportunistischem Laden und gezieltem Laden
# Retail: vor allem "Ich lade, wenn ich ohnehin einkaufen bin", vereinzelt low-SOC-Laden
soc_at_arrival_distribution:
  type: mixture
  value_unit: fraction                      # 0.0 bis 1.0
  max_soc: 0.7                              # maximales SoC bei Ankunft

  components:
  # Die Bennenung 'name' hat keine Funktion für den Code und kann beliebig angepasst werden
    - name: low_battery_charging            # gezieltes Laden aufgrund niedrigen SoC
      distribution: beta
      weight: 0.15
      alpha: [2.0, 3.0]                     # formt Peak im niedrigen SoC-Bereich (ca. 0.1–0.3)
      beta: [5.0, 7.0]

    - name: opportunistic_charging          # opportunistisches Laden mit eher hohem SoC
      distribution: normal
      weight: 0.6
      mu: [0.6, 0.8]                        # typischer SoC bei Ankunft
      sigma: [0.08, 0.12]